# -----------------------------------------------------------------------------
# Terraform Variables - Production Environment
# -----------------------------------------------------------------------------
# Copy this file to terraform.tfvars and customize the values.
# DO NOT commit terraform.tfvars to version control (it may contain secrets).
#
# IMPORTANT: Production configuration should be reviewed by the team.
# Consider using environment variables or a secrets manager for sensitive values.
# -----------------------------------------------------------------------------

# -----------------------------------------------------------------------------
# Project Configuration
# -----------------------------------------------------------------------------

project_id     = "prod-ai-agents-projects"
project_number = "YOUR_PROJECT_NUMBER" # Get from `gcloud projects describe prod-ai-agents-projects --format='value(projectNumber)'`
env_name       = "prod"
region         = "us-central1"
location       = "us"

# Workload Identity Federation (for GitHub Actions authentication)
workload_identity_pool_id = "github-pool"

# -----------------------------------------------------------------------------
# Labels
# -----------------------------------------------------------------------------

owner = "ai-platform-team"

additional_labels = {
  cost_center = "ai-production"
}

# -----------------------------------------------------------------------------
# APIs
# -----------------------------------------------------------------------------

# Enable AI Platform APIs (Vertex AI, etc.)
enable_ai_apis = false

# Add any additional APIs needed
enabled_apis = [
  "run.googleapis.com",
  "iam.googleapis.com",
  "secretmanager.googleapis.com",
  "cloudbuild.googleapis.com",
  "artifactregistry.googleapis.com",
  "cloudresourcemanager.googleapis.com",
  "logging.googleapis.com",
  "monitoring.googleapis.com",
]

# -----------------------------------------------------------------------------
# Secrets
# -----------------------------------------------------------------------------
# For production, create secrets without initial_value.
# Populate secret values manually or via secure CI/CD pipeline.

secrets = {
  # Example: Google API key for Luca
  # "google-api-key" = {
  #   replication = "auto"
  #   labels      = { service = "luca" }
  #   # NO initial_value for production!
  # }
}

# IMPORTANT: Set to false in production
# Secret values should be populated manually or via secure CI/CD
create_secret_versions = false

# -----------------------------------------------------------------------------
# IAM
# -----------------------------------------------------------------------------
# Environment-level service accounts and bindings.
# Feature-specific IAM is handled by feature modules.

service_accounts = {
  # Add shared service accounts here if needed
}

iam_bindings = {
  # Add environment-level IAM bindings here
}

# -----------------------------------------------------------------------------
# Luca API Configuration
# -----------------------------------------------------------------------------

luca_enabled = true

# Container image - use a specific version tag for production (not :latest)
# Format: REGION-docker.pkg.dev/PROJECT/REPO/IMAGE:TAG
luca_image = "us-central1-docker.pkg.dev/prod-ai-agents-projects/luca/luca-api:latest"

# Scaling - production settings for high availability
luca_min_instances = 1   # Always keep at least one instance warm
luca_max_instances = 100

# Resources - production-appropriate
luca_cpu    = "2"
luca_memory = "1Gi"

luca_concurrency = 100

# Environment variables
luca_env_vars = {
  LOG_LEVEL = "info"
}

# Secrets from Secret Manager
# Configure when you have secrets set up:
# luca_secrets = {
#   "GOOGLE_API_KEY" = {
#     secret_name = "projects/prod-ai-agents-projects/secrets/google-api-key"
#     version     = "latest"
#   }
# }

# Authentication - typically restricted in production
luca_allow_unauthenticated = false

# List of service accounts that can invoke the API
luca_invokers = [
  # "serviceAccount:frontend-sa@prod-ai-agents-projects.iam.gserviceaccount.com",
]

# GitHub repository for Workload Identity Federation (owner/repo format)
# This allows GitHub Actions to authenticate without JSON keys
luca_github_repo = "nicobrch/luca"

# -----------------------------------------------------------------------------
# ADD CONFIGURATION FOR NEW FEATURES HERE
# -----------------------------------------------------------------------------
